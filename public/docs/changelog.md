# 📝 更新日志

## 🚀 v3.11.4

### ✨ 新增
- 新增了消息弹窗天气预报功能（beta）。

### 🔧 优化
- 优化了部分UI的细节。

---
## 🚀 v3.11.3

### ✨ 新增
- 新增更多统计指标。

### 🛠️ Bug 修复
- 修复了统计报告中噪音等级显示异常的问题。
### 🔧 优化
- 优化了代码结构，提高了性能。
---
## 🚀 v3.11.2

### ✨ 新增
- 新增了消息通知功能(beta)，用户可以在设置中开启/关闭消息通知。
- 新增了对金内置句的缓存及编辑功能。
- 新增了用户自行编辑或者导入txt作为金句源的功能。
- 在关于页新增了一个按钮用于清除缓存。
- 新增了设置项热更新功能，用户可以在设置中实时调整参数，无需刷新页面。

### 🔧 优化
- 优化了部分UI的细节。

---
## 🚀 v3.11.1

### 🛠️ Bug 修复
- 修复了统计报告样式异常问题。

### 🔧 优化
- 优化了天气组件相关API的请求逻辑。
- 优化了高考倒计时的显示效果。

---
## 🚀 v3.11.0

### ✨ 新增
- 设置中支持自定义噪音计算时间窗。
- 设置中支持自定义晚自习页面各个组件的显示与隐藏。
- 设置中支持倒计时事件轮播。
- 设置中支持自定义倒计时事件的数字颜色与透明度。
- 设置中支持自定义倒计时事件的显示顺序。


### 🛠️ Bug 修复
- 修复了移动端tab栏显示异常的问题。
- 修复了金句组件显示异常的问题。

### ♻️ 重构
- 重构了噪音监测模块，优化了性能和实时图表显示与数据处理。
- 优化了设置面板的布局与交互，用户可以更方便地自定义设置。


---

## 🚀 v3.10.8

### ✨ 新增
- 晚自习页面新增背景设置：用户可以在晚自习页面自定义背景颜色或图片。

## 🚀 v3.10.7

### 🔧 优化
- 优化字体加载速度与缓存策略：首屏加载更快且离线可用。
- 改进噪音计算与判定方式：优化基线估计、移动平均与阈值判定，提醒更稳定、误报更少。

### ♻️ 重构
- 重新设计设置面板与公告栏的 Tabs 布局：统一公告风格、支持粘性顶栏与横向滚动，交互更清晰。

### ✨ 新增
- 设置面板新增“关于”页：展示版本、许可证、作者网站与开源地址。

---

## 🚀 v3.10.4

### ✨ 新增
- 噪音分贝值显示：在噪音监测状态中显示当前环境噪音分贝值。
- 噪音监测设置：新增在设置中开启/关闭噪音监测功能的选项。

### 🔧 优化
- 优化噪音实时图表显示。

---

## 🚀 v3.10.3

### ✨ 新增
- 支持自定义噪音监测阈值：用户可以在设置中自定义噪音监测的阈值，根据个人环境调整。
### ♻️ 重构
- 重构噪音计算机制，噪音计算更精准。

### 🔧 优化
- 优化在线字体缓存机制：为 Google Fonts 样式与字体配置更合理的缓存策略，首屏加载更快且离线可用。

---

## 🚀 v3.10.2

### 🛠️ Bug 修复
- 移动端噪音状态文本容器背景异常：移除黑色背景，样式与桌面端保持一致。

---

## 🚀 v3.10.1

### ✨ 新增
- 倒计时音效完善：最后 5 秒逐秒提示音效，结束播放终止音。

### 🛠️ Bug 修复
- 修复了倒计时和秒表计时不准确的问题。

### 🔧 优化
- 倒计时显示颜色一致性：移除可点击态默认透明度，数字常态显示为白色，与其它界面保持一致。
- 模式文案统一：将“计时”更名为“秒表”。

---

## 🚀 v3.10.0

### 🔧 优化
- 提升版本缓存策略：关键静态资源携带版本参数，更新后强制刷新。
- 代码结构与可靠性优化：更清晰的状态管理边界与副作用控制。
- 设置面板支持“点击保存后才生效”的统一机制。
---

## 🚀 v3.9.0

### ✨ 新增
- 新增噪音报告功能：在课时结束前自动生成统计报告，支持历史查看与关键指标展示（平均/峰值/提醒次数/吵闹时长）。

### 🔧 优化
- 优化噪音组件交互与可视化：独立滚动的历史记录左右栏、图表阈值线与面积填充、语义化无障碍属性。
- 设置面板新增“自动弹出报告”开关，支持持久化偏好，默认开启。

---

## 🚀 v3.8.0

### ♻️ 重构
- 重构天气获取组件，采用和风天气作为主要天气信息来源。

### 🔧 优化
- 优化设置界面天气信息显示：更清晰的城市定位与实时天气呈现，错误回退更稳健。
- 优化代码可读性：提升可维护性。
- 优化地理位置获取策略：优先使用浏览器原生 Geolocation，拒绝授权时回退到高德 IP 定位，再回退到其他 IP 源。

---

## 🚀 v3.7.0

### ✨ 新增
- 新增支持多种倒计时事件功能

### 🔧 优化
- 全面优化设置界面及全局表单组件，交互与一致性显著提升
- 显著提升网站 SEO 性能：语义化结构优化、元信息完善、站点地图与资源加载策略改进

---

## 🚀 v3.6.0

### ✨ 新增
- 支持 PWA 离线功能：启用 Service Worker 自动更新，导航回退覆盖所有同源路径。

### 🔧 优化
- 优化缓存策略：更新 PWA 导航回退、简化版本参数、清理重复服务器头、并补充服务端 .webmanifest 规则。

---

## 🎯 v3.5.2

### ✨ 新功能
- 在设置中新增金句刷新间隔的自定义选项，可灵活控制更新频率。
- 根据用户反馈精简在线金句分类：移除「动画、漫画、游戏、原创、来自网络、其他、影视、网易云」，仅保留「文学、诗词、哲学、抖机灵」。

### 🛠️ Bug 修复
- 修复设置界面开关按钮方向绘制错误，现已正确显示开/关状态。


---

*每一次更新都是为了给您带来更好的使用体验。感谢您的支持，如有建议欢迎反馈！*